# ============================================
# Spring Boot 主配置文件（通用配置）
# 开发环境：启动时添加 --spring.profiles.active=dev
# 生产环境：启动时添加 --spring.profiles.active=prod
# ============================================

spring:
  application:
    name: game-application

  # 激活的配置文件（默认开发环境）
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # 数据库配置（基础配置，具体值在各环境配置中）
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: ${DB_POOL_MAX_SIZE:10}
      minimum-idle: ${DB_POOL_MIN_IDLE:5}
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  # JPA 基础配置
  jpa:
    open-in-view: false
    properties:
      hibernate.dialect: org.hibernate.dialect.MySQLDialect

  # Redis 基础配置
  data:
    redis:
      timeout: 10000ms
      jedis:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5
          max-wait: -1ms

  # 静态资源配置
  web:
    resources:
      static-locations: classpath:/static/
  mvc:
    static-path-pattern: /**

# CORS 配置
cors:
  allowed-methods: ${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
  max-age: ${CORS_MAX_AGE:3600}

# 服务器配置
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /
  tomcat:
    threads:
      max: 200
      min-spare: 10

# JWT 配置
jwt:
  expiration: ${JWT_EXPIRATION:86400000}  # 24小时
